<!DOCTYPE html>
<html>

  <head>
    <title></title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script type='text/javascript' src='https://mozilla.github.io/pdf.js/build/pdf.js'></script>
    <script>
      function pdfRender(pdfID) {
        var pdfDoc = null
        var pageNum = 1
        var pageRendering = false
        var pageNumPending = null
        var scale = 0.8
        var canvas = document.createElement('canvas')
        var context = canvas.getContext('2d')
        document.currentScript.parentElement.appendChild(canvas)

        function renderPage(doc, num=pageNum) {
          if (pdfDoc == null) {
            pdfDoc = doc
            renderPage(doc)
          } else {
            if (pageRendering) {
              pageNumPending = num;
            } else {
              pageRendering = true
              pdfDoc.getPage(num).then(
                function(page) {
                  var viewport = page.getViewport({
                    scale: scale
                  })
                  canvas.height = viewport.height
                  canvas.width = viewport.width
                  var renderContext = {
                    canvasContext: context,
                    viewport: viewport
                  }
                  page.render(renderContext).promise.then(
                    function() {
                      pageRendering = false
                      if (pageNumPending !== null) {
                        renderPage(pdfDoc, pageNumPending)
                        pageNumPending = null
                      }
                    }
                  )
                }
              )
            }
          }
        }

        function onClick(mouse) {
          var cRect = canvas.getBoundingClientRect()
          var condition = mouse.clientX < cRect.right / 2 + cRect.left
          var buttonID = condition ? prevButtonID : nextButtonID
          if (buttonID == prevButtonID && 1 < pageNum) {
            pageNum--
            renderPage(pageNum)
          } else if (buttonID == nextButtonID && pageNum < pdfDoc.numPages) {
            pageNum++
            renderPage(pageNum)
          }
        }
        canvas.addEventListener('click', onClick)

        pdfjsLib.getDocument(pdfID).promise.then(renderPage)
      }

      function pdfRender_Example() {
        pdfRender('https://raw.githubusercontent.com/mozilla/pdf.js/ba2edeae/web/compressed.tracemonkey-pldi-09.pdf')
      }
    </script>
    <style>
      canvas,div {
        background-color: rgba(0, 0, 0, .1);
      }
    </style>


  </head>

  <body>

		<div style='width:500px;height:700px;'>
      <script type='text/javascript'>pdfRender_Example()</script>
    </div>



  </body>

</html>
